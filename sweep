#!/bin/bash
# Convenience wrapper for submitting sweeps
#
# Usage:
#   ./sweep dbpedia-100k          # Quick 100K sweep
#   ./sweep dbpedia-1m-subset     # 500K subset
#   ./sweep dbpedia-1m-full       # Full 1M sweep
#   ./sweep custom <args>         # Custom sweep with args

set -e

SWEEP_TYPE="${1:-help}"

case "$SWEEP_TYPE" in
    "dbpedia-100k")
        echo "Submitting DBpedia 100K sweep (2 hrs, 4GB RAM)..."
        ./scripts/sweeps/sweep_dbpedia_100k.sh
        ;;
    "dbpedia-1m-subset")
        echo "Submitting DBpedia 1M subset sweep (500K vectors, 4 hrs, 8GB RAM)..."
        ./scripts/sweeps/sweep_dbpedia_1m_subset.sh
        ;;
    "dbpedia-1m-full")
        echo "Submitting DBpedia 1M full sweep (8 hrs, 12GB RAM)..."
        ./scripts/sweeps/sweep_dbpedia_1m_full.sh
        ;;
    "custom")
        shift  # Remove 'custom' from args
        echo "Submitting custom sweep with args: $@"
        python scripts/run_sweep.py "$@"
        ;;
    "help"|*)
        echo "Usage: ./sweep <type>"
        echo ""
        echo "Available sweep types:"
        echo "  dbpedia-100k         Quick 100K vector sweep (~2 hrs)"
        echo "  dbpedia-1m-subset    500K vector sweep (~4 hrs)"
        echo "  dbpedia-1m-full      Full 1M vector sweep (~8 hrs)"
        echo "  custom <args>        Custom sweep (see: python scripts/run_sweep.py --help)"
        echo ""
        echo "Examples:"
        echo "  ./sweep dbpedia-100k"
        echo "  ./sweep custom --dataset dbpedia-1536 --limit 300000 --methods pq opq"
        exit 1
        ;;
esac
